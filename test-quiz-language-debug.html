<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>測驗語言切換調試</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .status {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }
        .debug-section {
            background: rgba(255, 193, 7, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
            font-family: 'Courier New', monospace;
        }
        .debug-section h3 {
            color: #ffc107;
            margin-top: 0;
        }
        .debug-info {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-size: 14px;
        }
        .checklist {
            background: rgba(76, 175, 80, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }
        .checklist ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .checklist li {
            margin: 5px 0;
        }
        .problem-section {
            background: rgba(244, 67, 54, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #f44336;
        }
        .solution-section {
            background: rgba(76, 175, 80, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔍 測驗語言切換調試</h1>
        
        <div class="test-section">
            <h2>🎯 問題診斷</h2>
            <div class="problem-section">
                <h3>❌ 當前問題</h3>
                <p>語言切換按鈕可以點擊，但整體頁面沒有進行中英文轉換：</p>
                <ul>
                    <li><strong>按鈕可點擊</strong>：語言切換按鈕現在可以正常點擊</li>
                    <li><strong>無確認對話框</strong>：點擊後不會出現離開測驗的對話框</li>
                    <li><strong>頁面不轉換</strong>：點擊後頁面文字沒有從中文轉換為英文</li>
                    <li><strong>功能不完整</strong>：語言切換功能沒有完全生效</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h2>🔧 調試步驟</h2>
            <div class="debug-section">
                <h3>📊 調試信息收集</h3>
                <div class="debug-info">
                    <strong>1. 開啟瀏覽器開發者工具</strong><br>
                    按 F12 或右鍵選擇「檢查元素」
                </div>
                <div class="debug-info">
                    <strong>2. 切換到 Console 標籤</strong><br>
                    查看是否有 JavaScript 錯誤或調試信息
                </div>
                <div class="debug-info">
                    <strong>3. 進入測驗頁面</strong><br>
                    前往 exam_quiz.html 頁面
                </div>
                <div class="debug-info">
                    <strong>4. 點擊語言切換按鈕</strong><br>
                    觀察 Console 中的調試輸出
                </div>
                <div class="debug-info">
                    <strong>5. 檢查調試信息</strong><br>
                    應該看到以下信息：
                    <ul>
                        <li>toggleLanguage: switching from zh to en</li>
                        <li>getCurrentPage: path = ..., href = ...</li>
                        <li>Detected quiz page</li>
                        <li>updateQuizPage called with content: ...</li>
                        <li>Page title updated to: ...</li>
                        <li>Header title updated to: ...</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>🧪 測試功能</h2>
            <div class="checklist">
                <h3>📋 調試測試步驟</h3>
                <ol>
                    <li><strong>開啟開發者工具</strong>
                        <ul>
                            <li>按 F12 開啟瀏覽器開發者工具</li>
                            <li>切換到 Console 標籤</li>
                            <li>清除之前的日誌（可選）</li>
                        </ul>
                    </li>
                    
                    <li><strong>進入測驗頁面</strong>
                        <ul>
                            <li>前往 exam_quiz.html</li>
                            <li>觀察 Console 是否有錯誤信息</li>
                            <li>確認頁面正常載入</li>
                        </ul>
                    </li>
                    
                    <li><strong>測試語言切換</strong>
                        <ul>
                            <li>點擊左下角語言切換按鈕</li>
                            <li>觀察 Console 中的調試輸出</li>
                            <li>檢查是否有錯誤信息</li>
                            <li>確認頁面文字是否更新</li>
                        </ul>
                    </li>
                    
                    <li><strong>分析調試信息</strong>
                        <ul>
                            <li>檢查 getCurrentPage 是否正確識別頁面</li>
                            <li>檢查 updateQuizPage 是否被調用</li>
                            <li>檢查 HTML 元素是否被找到</li>
                            <li>檢查翻譯內容是否正確載入</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <div class="test-section">
            <h2>🎯 快速測試</h2>
            <button class="button" onclick="goToQuiz()">🧪 前往筆試測驗</button>
            <button class="button" onclick="openDevTools()">🛠️ 開啟開發者工具</button>
            <button class="button" onclick="checkConsole()">📊 檢查控制台</button>
            <button class="button" onclick="testLanguageSwitch()">🔄 測試語言切換</button>
        </div>

        <div class="status" id="status">
            <strong>調試狀態：</strong>等待調試...
        </div>

        <div class="test-section">
            <h2>📊 預期調試輸出</h2>
            <div class="debug-section">
                <h3>✅ 正常的調試輸出</h3>
                <div class="debug-info">
<pre>toggleLanguage: switching from zh to en
getCurrentPage: path = /exam_quiz.html href = http://localhost:3000/exam_quiz.html
Detected quiz page
updateQuizPage called with content: {quiz: {pageTitle: "Written Test - PBLS VR Learning Platform", ...}}
Page title updated to: Written Test - PBLS VR Learning Platform
Header title updated to: Welcome to PBLS Learning Platform
User info updated to: CGU (Chang Gung University), Nursing
...</pre>
                </div>
                
                <h3>❌ 可能的錯誤情況</h3>
                <div class="debug-info">
<pre>// 頁面識別錯誤
getCurrentPage: path = /exam_quiz.html href = http://localhost:3000/exam_quiz.html
No specific page detected, returning default

// 元素未找到
Header title element not found
User info element not found

// 翻譯內容錯誤
updateQuizPage called with content: undefined
</pre>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>🔧 常見問題解決</h2>
            <div class="solution-section">
                <h3>🛠️ 問題排除指南</h3>
                <ul>
                    <li><strong>頁面識別問題</strong>
                        <ul>
                            <li>檢查 URL 是否包含 exam_quiz.html</li>
                            <li>確認 getCurrentPage 函數正確識別頁面</li>
                        </ul>
                    </li>
                    <li><strong>元素未找到</strong>
                        <ul>
                            <li>檢查 HTML 元素是否存在</li>
                            <li>確認 CSS 選擇器是否正確</li>
                        </ul>
                    </li>
                    <li><strong>翻譯內容錯誤</strong>
                        <ul>
                            <li>檢查翻譯對象是否正確載入</li>
                            <li>確認語言切換邏輯是否正確</li>
                        </ul>
                    </li>
                    <li><strong>JavaScript 錯誤</strong>
                        <ul>
                            <li>檢查 Console 中的錯誤信息</li>
                            <li>確認所有必要的函數都已定義</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        function goToQuiz() {
            window.location.href = 'exam_quiz.html';
        }

        function openDevTools() {
            const status = document.getElementById('status');
            status.innerHTML = '<strong>調試狀態：</strong>🛠️ 請按 F12 開啟開發者工具，切換到 Console 標籤，然後前往測驗頁面測試語言切換功能';
            status.className = 'status';
        }

        function checkConsole() {
            const status = document.getElementById('status');
            status.innerHTML = '<strong>調試狀態：</strong>📊 請在 Console 中查看調試輸出，確認 getCurrentPage 和 updateQuizPage 函數是否正常執行';
            status.className = 'status';
        }

        function testLanguageSwitch() {
            const status = document.getElementById('status');
            status.innerHTML = '<strong>調試狀態：</strong>🔄 請在測驗頁面點擊語言切換按鈕，觀察 Console 輸出，檢查頁面文字是否正確更新';
            status.className = 'status';
        }

        // 頁面載入時顯示狀態
        document.addEventListener('DOMContentLoaded', function() {
            const status = document.getElementById('status');
            status.innerHTML = '<strong>調試狀態：</strong>✅ 測驗語言切換調試頁面已載入，請按照調試步驟進行測試';
            status.className = 'status';
        });
    </script>
</body>
</html>
