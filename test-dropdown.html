<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>下拉式選單測試</title>
    <style>
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a148c;
        }
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1bee7;
            border-radius: 10px;
            font-size: 16px;
            background: white;
        }
        .form-group select:focus {
            outline: none;
            border-color: #9c27b0;
        }
        .test-result {
            margin-top: 20px;
            padding: 15px;
            background: #e8f5e8;
            border: 1px solid #4caf50;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>下拉式選單功能測試</h1>
    
    <div class="form-group">
        <label for="unit">單位*</label>
        <select id="unit" name="unit" required>
            <option value="">請選擇單位</option>
            <option value="長庚大學">長庚大學</option>
            <option value="長庚科大">長庚科大</option>
            <option value="長庚醫院">長庚醫院</option>
        </select>
    </div>

    <div class="form-group">
        <label for="department">系所/部門*</label>
        <select id="department" name="department" required>
            <option value="">請先選擇單位</option>
        </select>
    </div>

    <div id="test-result" class="test-result" style="display: none;"></div>

    <script>
        // 部門選項配置
        const departmentOptions = {
            '長庚大學': [
                '醫學系',
                '中醫學系（含傳統中醫學碩士班、天然藥物碩士班）',
                '護理學系（含碩士班、博士班、學士後護理系）',
                '醫學生物技術暨檢驗學系',
                '醫學影像暨放射科學系',
                '物理治療學系',
                '職能治療學系',
                '呼吸治療學系',
                '生物醫學系（含碩士班）',
                '資管系',
                '臨床醫學研究所',
                '生物醫學研究所（含碩博士班）',
                '顱顏口腔醫學研究所',
                '早期療育研究所（碩士班）',
                '免疫轉譯醫學研究所（碩士班）'
            ],
            '長庚科大': [
                '護理系',
                '保健營養系',
                '高齡暨健康照護管理系'
            ],
            '長庚醫院': [
                '內科',
                '外科',
                '婦產科',
                '小兒科',
                '耳鼻喉科',
                '眼科',
                '皮膚科',
                '神經內科',
                '神經外科',
                '骨科',
                '泌尿科',
                '心臟內科',
                '心臟血管外科',
                '腫瘤科',
                '放射腫瘤科',
                '腸胃科',
                '肝膽科',
                '腎臟科',
                '血液腫瘤科',
                '呼吸胸腔科',
                '過敏風濕免疫科',
                '感染科',
                '麻醉科',
                '復健科',
                '核子醫學科',
                '精神科',
                '放射科',
                '病理科',
                '胸腔外科',
                '家醫科',
                '急診科'
            ]
        };

        // 更新部門選項
        function updateDepartments() {
            const unitSelect = document.getElementById('unit');
            const departmentSelect = document.getElementById('department');
            const resultDiv = document.getElementById('test-result');
            
            if (!unitSelect || !departmentSelect) {
                resultDiv.textContent = '❌ 找不到下拉式選單元素';
                resultDiv.style.display = 'block';
                return;
            }
            
            const selectedUnit = unitSelect.value;
            
            // 清空部門選項
            departmentSelect.innerHTML = '<option value="">請選擇系所/部門</option>';
            
            if (selectedUnit && departmentOptions[selectedUnit]) {
                departmentOptions[selectedUnit].forEach(dept => {
                    const option = document.createElement('option');
                    option.value = dept;
                    option.textContent = dept;
                    departmentSelect.appendChild(option);
                });
                
                resultDiv.textContent = `✅ 成功載入 ${departmentOptions[selectedUnit].length} 個系所/部門選項`;
                resultDiv.style.display = 'block';
            } else if (selectedUnit) {
                resultDiv.textContent = '❌ 找不到對應的系所/部門選項';
                resultDiv.style.display = 'block';
            } else {
                resultDiv.style.display = 'none';
            }
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            const unitSelect = document.getElementById('unit');
            if (unitSelect) {
                unitSelect.addEventListener('change', updateDepartments);
                console.log('✅ 下拉式選單事件綁定成功');
            } else {
                console.error('❌ 找不到單位下拉式選單');
            }
        });
    </script>
</body>
</html>
