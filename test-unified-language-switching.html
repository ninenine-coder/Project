<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>統一語言切換測試</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .status {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }
        .info-section {
            background: rgba(33, 150, 243, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
        }
        .technical-details {
            background: rgba(255, 193, 7, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
            font-family: 'Courier New', monospace;
        }
        .checklist {
            background: rgba(76, 175, 80, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }
        .checklist ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .checklist li {
            margin: 5px 0;
        }
        .page-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .page-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        .page-card:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.2);
        }
        .page-card h4 {
            margin: 0 0 10px 0;
            color: #fff;
        }
        .page-card p {
            margin: 0;
            font-size: 14px;
            opacity: 0.8;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
        }
        .feature-card.unified {
            border-left: 4px solid #4CAF50;
        }
        .feature-card.localized {
            border-left: 4px solid #ff9800;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🌐 統一語言切換測試</h1>
        
        <div class="test-section">
            <h2>🎯 功能說明</h2>
            <div class="info-section">
                <h3>統一語言切換機制</h3>
                <p><strong>"左下角的中英文轉換按鍵會設在登入後網站的所有頁面，且會是統一的，也就是說切成中文時，整個網站皆是中文，若切成英文時，整個網站都是英文"</strong></p>
                <ul>
                    <li>✅ <strong>全域語言管理</strong>：使用 localStorage 存儲語言偏好</li>
                    <li>✅ <strong>統一按鈕位置</strong>：所有頁面左下角都有語言切換按鈕</li>
                    <li>✅ <strong>同步切換</strong>：切換語言後所有頁面內容同步更新</li>
                    <li>✅ <strong>持久化存儲</strong>：語言選擇在瀏覽器關閉重開後仍然保持</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h2>🔧 技術實現</h2>
            <div class="technical-details">
<h4>核心實現機制：</h4>
<pre>1. 語言存儲：
   localStorage.setItem('pbls_language', newLang);

2. 語言讀取：
   const currentLang = localStorage.getItem('pbls_language') || 'zh';

3. 統一按鈕：
   - 所有頁面都包含相同的語言切換按鈕HTML
   - 位置固定在左下角
   - 樣式統一

4. 同步更新：
   - 切換語言時更新 localStorage
   - 所有頁面讀取相同的語言偏好
   - 內容根據語言偏好動態顯示</pre>

<h4>涵蓋的頁面：</h4>
<pre>✅ info.html (資訊頁面)
✅ index.html (練習專區)
✅ exam.html (考試專區)
✅ exam_quiz.html (筆試測驗)
✅ history.html (歷史成績)
✅ team.html (團隊頁面)</pre>
            </div>
        </div>

        <div class="test-section">
            <h2>📄 網站頁面</h2>
            <div class="page-grid">
                <div class="page-card" onclick="goToPage('info.html')">
                    <h4>📚 資訊頁面</h4>
                    <p>PBLS知識庫、情境案例、流程圖</p>
                </div>
                <div class="page-card" onclick="goToPage('index.html')">
                    <h4>🎮 練習專區</h4>
                    <p>360°影片、虛擬人互動、VR操作</p>
                </div>
                <div class="page-card" onclick="goToPage('exam.html')">
                    <h4>📝 考試專區</h4>
                    <p>筆試測驗、情境測驗</p>
                </div>
                <div class="page-card" onclick="goToPage('history.html')">
                    <h4>📊 歷史成績</h4>
                    <p>成績記錄、學習進度</p>
                </div>
                <div class="page-card" onclick="goToPage('team.html')">
                    <h4>👥 團隊頁面</h4>
                    <p>開發團隊、技術支援</p>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>🔍 統一 vs 個別語言切換</h2>
            <div class="feature-grid">
                <div class="feature-card unified">
                    <h4>✅ 統一語言切換（當前實現）</h4>
                    <ul>
                        <li>一個按鈕控制整個網站</li>
                        <li>語言偏好存儲在 localStorage</li>
                        <li>所有頁面同步切換</li>
                        <li>用戶體驗一致</li>
                        <li>設置持久保存</li>
                    </ul>
                </div>
                <div class="feature-card localized">
                    <h4>❌ 個別頁面語言切換（不推薦）</h4>
                    <ul>
                        <li>每個頁面獨立切換</li>
                        <li>語言設置不統一</li>
                        <li>用戶體驗混亂</li>
                        <li>設置不會保存</li>
                        <li>維護複雜度高</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>🧪 測試步驟</h2>
            <div class="checklist">
                <h3>📋 統一語言切換測試流程</h3>
                <ol>
                    <li><strong>測試語言存儲</strong>
                        <ul>
                            <li>前往任意頁面</li>
                            <li>點擊語言切換按鈕</li>
                            <li>檢查瀏覽器開發者工具 → Application → Local Storage</li>
                            <li>確認 'pbls_language' 值已更新</li>
                        </ul>
                    </li>
                    
                    <li><strong>測試頁面間同步</strong>
                        <ul>
                            <li>在資訊頁面切換語言</li>
                            <li>前往練習專區頁面</li>
                            <li>確認頁面內容已同步切換</li>
                            <li>繼續測試其他頁面</li>
                        </ul>
                    </li>
                    
                    <li><strong>測試持久化</strong>
                        <ul>
                            <li>切換語言到英文</li>
                            <li>關閉瀏覽器</li>
                            <li>重新打開網站</li>
                            <li>確認仍然是英文界面</li>
                        </ul>
                    </li>
                    
                    <li><strong>測試按鈕統一性</strong>
                        <ul>
                            <li>檢查所有頁面的語言切換按鈕位置</li>
                            <li>確認按鈕樣式統一</li>
                            <li>確認按鈕功能正常</li>
                        </ul>
                    </li>
                    
                    <li><strong>測試內容翻譯</strong>
                        <ul>
                            <li>切換到中文，檢查所有頁面內容</li>
                            <li>切換到英文，檢查所有頁面內容</li>
                            <li>確認翻譯完整且正確</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <div class="test-section">
            <h2>🎯 快速測試</h2>
            <button class="button" onclick="testLanguageStorage()">💾 測試語言存儲</button>
            <button class="button" onclick="testPageSync()">🔄 測試頁面同步</button>
            <button class="button" onclick="testPersistence()">⏰ 測試持久化</button>
            <button class="button" onclick="testAllPages()">📄 測試所有頁面</button>
        </div>

        <div class="status" id="status">
            <strong>測試狀態：</strong>等待測試...
        </div>

        <div class="test-section">
            <h2>🔍 檢查語言設置</h2>
            <div class="technical-details">
<h4>當前語言設置：</h4>
<pre id="languageStatus">載入中...</pre>

<h4>LocalStorage 內容：</h4>
<pre id="storageStatus">載入中...</pre>

<button class="button" onclick="refreshStatus()">🔄 刷新狀態</button>
            </div>
        </div>

        <div class="test-section">
            <h2>📊 預期結果</h2>
            <div class="checklist">
                <h3>✅ 統一語言切換應該正常工作的功能</h3>
                <ul>
                    <li><strong>語言存儲</strong>：語言偏好正確存儲在 localStorage</li>
                    <li><strong>頁面同步</strong>：所有頁面語言設置同步</li>
                    <li><strong>按鈕統一</strong>：所有頁面都有相同位置的語言切換按鈕</li>
                    <li><strong>內容翻譯</strong>：所有頁面內容都正確翻譯</li>
                    <li><strong>持久化</strong>：語言設置在瀏覽器重啟後保持</li>
                    <li><strong>用戶體驗</strong>：整個網站語言體驗一致</li>
                </ul>
                
                <h3>🎯 測試重點</h3>
                <ul>
                    <li><strong>統一性</strong>：確認所有頁面使用相同的語言設置</li>
                    <li><strong>同步性</strong>：確認語言切換後所有頁面同步更新</li>
                    <li><strong>持久性</strong>：確認語言設置在瀏覽器重啟後保持</li>
                    <li><strong>完整性</strong>：確認所有頁面內容都正確翻譯</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        function goToPage(page) {
            window.location.href = page;
        }

        function testLanguageStorage() {
            const status = document.getElementById('status');
            status.innerHTML = '<strong>測試狀態：</strong>💾 語言存儲測試：請前往任意頁面，點擊語言切換按鈕，然後檢查開發者工具 → Application → Local Storage，確認 "pbls_language" 值已更新';
            status.className = 'status';
        }

        function testPageSync() {
            const status = document.getElementById('status');
            status.innerHTML = '<strong>測試狀態：</strong>🔄 頁面同步測試：請在資訊頁面切換語言，然後前往練習專區頁面，確認頁面內容已同步切換，繼續測試其他頁面';
            status.className = 'status';
        }

        function testPersistence() {
            const status = document.getElementById('status');
            status.innerHTML = '<strong>測試狀態：</strong>⏰ 持久化測試：請切換語言到英文，關閉瀏覽器，重新打開網站，確認仍然是英文界面';
            status.className = 'status';
        }

        function testAllPages() {
            const status = document.getElementById('status');
            status.innerHTML = '<strong>測試狀態：</strong>📄 所有頁面測試：請依次測試所有頁面（資訊、練習、考試、歷史、團隊），確認語言切換按鈕位置統一，功能正常，內容翻譯完整';
            status.className = 'status';
        }

        function refreshStatus() {
            const currentLang = localStorage.getItem('pbls_language') || 'zh';
            const langText = currentLang === 'zh' ? '中文' : 'English';
            
            document.getElementById('languageStatus').textContent = `當前語言：${langText} (${currentLang})`;
            
            // 顯示所有 localStorage 內容
            let storageContent = '';
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                storageContent += `${key}: ${value}\n`;
            }
            document.getElementById('storageStatus').textContent = storageContent || 'LocalStorage 為空';
        }

        // 頁面載入時顯示狀態
        document.addEventListener('DOMContentLoaded', function() {
            const status = document.getElementById('status');
            status.innerHTML = '<strong>測試狀態：</strong>✅ 統一語言切換測試頁面已載入，請按照測試步驟進行測試';
            status.className = 'status';
            
            // 刷新狀態顯示
            refreshStatus();
        });
    </script>
</body>
</html>
