/* =============== Glass System =============== */
/* GitHub Pages 兼容的液態玻璃系統 */

/* 所有要有液態玻璃效果的容器都加 .glass （或 .glass-card 等同） */
.glass, .glass-card {
  position: relative;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.25);
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.18), inset 0 1px 2px rgba(255, 255, 255, 0.18);
  color: rgba(31, 41, 55, .95);

  /* 這三行是 GitHub Pages 下最關鍵的修復（強制開 GPU 合成層） */
  transform: translateZ(0);
  will-change: backdrop-filter;
  isolation: isolate;
}

/* 支援 backdrop-filter 才開啟模糊/飽和 */
.support-backdrop .glass, 
.support-backdrop .glass-card {
  backdrop-filter: blur(22px) saturate(200%);
  -webkit-backdrop-filter: blur(22px) saturate(200%);
}

/* 不支援時的回退：不會全黑，維持半透明 */
.no-backdrop .glass, 
.no-backdrop .glass-card {
  background: rgba(255, 255, 255, 0.30);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

/* 跑馬燈膠囊形狀（你跑馬燈的容器請加 .glass 和 .glass-pill） */
.glass-pill {
  height: 58px;
  display: flex;
  align-items: center;
  padding: 0 18px;
  border-radius: 16px;
}

/* 建議的固定位置與間距（和 header / 側邊留白） */
.marquee {
  position: fixed;
  top: 88px;     /* 與 header 拉開 */
  left: 16px;    /* 與左欄拉開 */
  right: 16px;   /* 右側留白 */
  z-index: 1000;
}

/* 跑馬燈內文 */
.marquee-content {
  display: flex;
  animation: marquee 30s linear infinite;
  white-space: nowrap;
  width: 100%;
}

.marquee:hover .marquee-content {
  animation-play-state: paused;
}

.marquee-item {
  margin-right: 60px;
  font-size: 16px;
  font-weight: 500;
  flex-shrink: 0;
  padding: 0 20px;
  color: rgba(255, 255, 255, 0.95);
  text-shadow: 0 2px 6px rgba(0,0,0,0.25);
}

@keyframes marquee {
  0% { transform: translateX(100vw); }
  100% { transform: translateX(-100%); }
}

/* =============== 瓶蓋（寶特瓶蓋卡片） =============== */

.bottle-cap {
  --s: var(--cap-size, 200px);
  width: var(--s);
  height: var(--s);
  position: relative;
  border-radius: 50%;
  display: grid;
  place-items: center;
  filter: drop-shadow(0 14px 26px rgba(0,0,0,.18));
  isolation: isolate;
}

/* 外圈鋸齒：同時放 mask 與 -webkit-mask；不支援時自動隱藏 */
.bottle-cap::before {
  content: "";
  position: absolute;
  inset: -10px;
  border-radius: 50%;
  background:
    repeating-conic-gradient(
      var(--cap-edge, #cfd9e6) 0deg 6deg,
      transparent 6deg 12deg
    );
  -webkit-mask: radial-gradient(circle, transparent 62%, #000 63%);
          mask: radial-gradient(circle, transparent 62%, #000 63%);
}

/* 瀏覽器不支援 mask 時，隱藏鋸齒避免破圖 */
.no-mask .bottle-cap::before { display: none; }

/* 瓶蓋正面／反面 */
.cap-face {
  width: calc(var(--s) * .76);
  height: calc(var(--s) * .76);
  border-radius: 50%;
  background: radial-gradient(120% 120% at 30% 30%, #fff, #e9eef6 60%, #d2dbe6);
  display: grid;
  place-items: center;
  perspective: 1000px;
  transform-style: preserve-3d;
  transition: transform .8s cubic-bezier(.2,.8,.2,1);
}

/* 卡片翻面：在父層加 .is-open 即可 */
.bottle-cap.is-open .cap-face {
  transform: rotateY(180deg);
}

/* 正面內容 */
.cap-front, .cap-back {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  backface-visibility: hidden;
  border-radius: 50%;
}

.cap-front { transform: rotateY(0deg); }
.cap-back  { transform: rotateY(180deg); background: #101828; color: #fff; }

/* =============== 小工具 =============== */

/* 讓所有玻璃更透明（你覺得不夠透明時可以再調） */
.glass--lighter { background: rgba(255,255,255,.06); }

/* hover 微光掃過（選配） */
.glass--glow::after {
  content:"";
  position:absolute;
  inset:-40%;
  background: radial-gradient(200px 200px at var(--x,50%) var(--y,50%), rgba(255,255,255,.35), transparent 60%);
  filter: blur(16px);
  mix-blend-mode: screen;
  opacity: var(--o,0);
  transition: opacity .25s ease;
  pointer-events: none;
}
.glass--glow:hover { --o: 1; }

/* 響應式適配 */
@media (max-width: 768px) {
  .marquee {
    top: 95px;
    left: 12px;
    right: 12px;
    height: 50px;
  }
  
  .marquee-item {
    font-size: 14px;
    margin-right: 40px;
  }
  
  .bottle-cap {
    --cap-size: 150px;
  }
}

@media (max-width: 480px) {
  .marquee {
    top: 100px;
    left: 8px;
    right: 8px;
    height: 45px;
  }
  
  .marquee-item {
    font-size: 13px;
    margin-right: 30px;
  }
  
  .bottle-cap {
    --cap-size: 120px;
  }
}
