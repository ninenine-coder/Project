<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>筆試測驗語言切換測試</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #fff;
        }
        .test-section {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        .status {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
        }
        .feature-card h4 {
            margin-top: 0;
            color: #4CAF50;
        }
        .checklist {
            background: rgba(76, 175, 80, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #4CAF50;
        }
        .checklist ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .checklist li {
            margin: 5px 0;
        }
        .code-block {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧪 筆試測驗語言切換功能測試</h1>
        
        <div class="test-section">
            <h2>✅ 已實現的功能</h2>
            <div class="checklist">
                <h3>🔧 語言切換按鍵</h3>
                <ul>
                    <li><strong>位置</strong>：側邊欄底部，與其他頁面保持一致</li>
                    <li><strong>樣式</strong>：綠色按鈕，固定位置，懸停效果</li>
                    <li><strong>功能</strong>：點擊可切換中英文</li>
                </ul>
                
                <h3>📝 頁面內容翻譯</h3>
                <ul>
                    <li><strong>頁面標題</strong>：筆試測驗 - PBLS VR教學平台 / Written Test - PBLS VR Learning Platform</li>
                    <li><strong>頂部標題</strong>：歡迎使用PBLS教學平台 / Welcome to PBLS Learning Platform</li>
                    <li><strong>用戶信息</strong>：CGU(長庚大學), Nursing / CGU(Chang Gung University), Nursing</li>
                    <li><strong>跑馬燈</strong>：6個跑馬燈項目全部支持中英文切換</li>
                    <li><strong>測驗按鈕</strong>：開始筆試測驗 / Start Written Test</li>
                    <li><strong>測驗說明</strong>：完整的測驗描述支持中英文</li>
                </ul>
                
                <h3>🎯 題目集選項</h3>
                <ul>
                    <li><strong>中文題目</strong>：data/questions.json（20題中文題目）</li>
                    <li><strong>英文題目</strong>：data/questions_en.json（20題英文題目）</li>
                    <li><strong>自動切換</strong>：根據語言設置自動載入對應題目</li>
                    <li><strong>錯誤處理</strong>：英文題目載入失敗時自動回退到中文題目</li>
                </ul>
                
                <h3>📊 測驗結果翻譯</h3>
                <ul>
                    <li><strong>分數標籤</strong>：分 / points</li>
                    <li><strong>統計項目</strong>：答對題數 / Correct Answers</li>
                    <li><strong>統計項目</strong>：總題數 / Total Questions</li>
                    <li><strong>統計項目</strong>：用時 / Time Used</li>
                    <li><strong>測驗詳情</strong>：測驗詳情 / Test Details</li>
                    <li><strong>重新測驗</strong>：重新測驗 / Retake Test</li>
                </ul>
                
                <h3>⚠️ 離開確認對話框</h3>
                <ul>
                    <li><strong>中文</strong>：尚未完成筆試測驗，若現在離開測驗將不會記錄，確定是否離開？</li>
                    <li><strong>英文</strong>：The written test is not completed yet. If you leave now, the test will not be recorded. Are you sure you want to leave?</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h2>🔧 技術實現細節</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>📁 文件結構</h4>
                    <div class="code-block">
data/
├── questions.json      (中文題目)
└── questions_en.json   (英文題目)

src/js/
└── language-switcher.js (語言切換邏輯)
                    </div>
                </div>
                
                <div class="feature-card">
                    <h4>🎯 題目載入邏輯</h4>
                    <div class="code-block">
const currentLang = localStorage.getItem('pbls_language') || 'zh';
const questionFile = currentLang === 'en' 
  ? 'data/questions_en.json' 
  : 'data/questions.json';
                    </div>
                </div>
                
                <div class="feature-card">
                    <h4>🔄 語言切換流程</h4>
                    <div class="code-block">
1. 用戶點擊語言切換按鍵
2. 更新 localStorage 語言設置
3. 更新頁面所有文字內容
4. 重新載入對應語言的題目
5. 更新全局翻譯變量
                    </div>
                </div>
                
                <div class="feature-card">
                    <h4>⚡ 動態內容翻譯</h4>
                    <div class="code-block">
// 測驗結果使用翻譯
const translations = window.quizTranslations || {
  score: '分',
  correctAnswers: '答對題數',
  // ...
};
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>🧪 測試步驟</h2>
            <div class="checklist">
                <h3>📋 完整測試流程</h3>
                <ol>
                    <li><strong>基本功能測試</strong>
                        <ul>
                            <li>進入筆試測驗頁面</li>
                            <li>檢查側邊欄底部是否有語言切換按鍵</li>
                            <li>確認按鍵樣式正確（綠色，地球圖標）</li>
                        </ul>
                    </li>
                    
                    <li><strong>語言切換測試</strong>
                        <ul>
                            <li>點擊語言切換按鍵</li>
                            <li>檢查頁面標題是否切換</li>
                            <li>檢查頂部標題和用戶信息是否切換</li>
                            <li>檢查跑馬燈內容是否切換</li>
                        </ul>
                    </li>
                    
                    <li><strong>題目集測試</strong>
                        <ul>
                            <li>在中文模式下點擊「開始筆試測驗」</li>
                            <li>確認載入的是中文題目</li>
                            <li>切換到英文模式，重新開始測驗</li>
                            <li>確認載入的是英文題目</li>
                        </ul>
                    </li>
                    
                    <li><strong>測驗結果測試</strong>
                        <ul>
                            <li>完成一次測驗</li>
                            <li>檢查結果頁面的所有文字</li>
                            <li>切換語言，重新測驗</li>
                            <li>確認結果頁面文字正確切換</li>
                        </ul>
                    </li>
                    
                    <li><strong>離開確認測試</strong>
                        <ul>
                            <li>測驗進行中嘗試離開頁面</li>
                            <li>檢查確認對話框的語言</li>
                            <li>切換語言後重複測試</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <div class="test-section">
            <h2>🎯 快速測試</h2>
            <button class="button" onclick="goToQuiz()">🧪 前往筆試測驗</button>
            <button class="button" onclick="checkLanguageFiles()">📁 檢查語言文件</button>
            <button class="button" onclick="testLanguageSwitch()">🔄 測試語言切換</button>
        </div>

        <div class="status" id="status">
            <strong>測試狀態：</strong>等待測試...
        </div>
    </div>

    <script>
        function goToQuiz() {
            window.location.href = 'exam_quiz.html';
        }

        function checkLanguageFiles() {
            const status = document.getElementById('status');
            
            // 檢查語言文件是否存在
            fetch('data/questions.json')
                .then(response => {
                    if (response.ok) {
                        return fetch('data/questions_en.json');
                    } else {
                        throw new Error('中文題目文件不存在');
                    }
                })
                .then(response => {
                    if (response.ok) {
                        status.innerHTML = '<strong>測試狀態：</strong>✅ 中英文題目文件都存在，可以開始測試';
                        status.className = 'status';
                    } else {
                        throw new Error('英文題目文件不存在');
                    }
                })
                .catch(error => {
                    status.innerHTML = '<strong>測試狀態：</strong>❌ ' + error.message;
                    status.className = 'status';
                    status.style.borderLeftColor = '#f44336';
                });
        }

        function testLanguageSwitch() {
            const currentLang = localStorage.getItem('pbls_language') || 'zh';
            const newLang = currentLang === 'zh' ? 'en' : 'zh';
            
            localStorage.setItem('pbls_language', newLang);
            
            const status = document.getElementById('status');
            status.innerHTML = `<strong>測試狀態：</strong>🔄 語言已切換到 ${newLang === 'zh' ? '中文' : 'English'}，請前往筆試測驗頁面測試`;
            status.className = 'status';
        }

        // 頁面載入時顯示狀態
        document.addEventListener('DOMContentLoaded', function() {
            const currentLang = localStorage.getItem('pbls_language') || 'zh';
            const status = document.getElementById('status');
            status.innerHTML = `<strong>測試狀態：</strong>✅ 筆試測驗語言切換測試頁面已載入，當前語言：${currentLang === 'zh' ? '中文' : 'English'}`;
            status.className = 'status';
        });
    </script>
</body>
</html>
